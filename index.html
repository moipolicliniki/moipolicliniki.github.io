<!DOCTYPE html>
<meta aframe-injected="" name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui">
<meta aframe-injected="" name="mobile-web-app-capable" content="yes">
<title>Мои поликлиники AR</title>
<link rel="stylesheet" type="text/css" href="../css/main.css"/>
<script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.0/aframe/build/aframe-ar.js"></script>
<script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
<script src="https://github.com/rexraptor08/animation-controls/tree/master/js/aframe-extras.js"></script>
<script src="../js/main.js"></script>

<body style='margin : 0px; overflow: hidden;'>
<div class="AR-tip">
	<p>Для быстрой и стабильной работы лучше использовать «Гугл Хром» или  «Сафари» и закрыть другие вкладки.</p>
        <p>Дополненная реальность отображается, когда камера видит черно-белую метку.</p>
	<a class="gotit" href="#">Понятно</a>
</div>
	
<div id="container">
<img class="center-pic" src="http://aa-p.ru/Images/loading_gray.gif" width="30%" height="40%"/>
</div>
  <a-scene embedded arjs='sourceType: webcam; trackingMethod: best; detectionMode: mono_and_matrix; matrixCodeType: 3x3; debugUIEnabled: false' shadow>
	<a-assets>
           <a-asset-item id="poliklinnika" src="https://raw.githubusercontent.com/moipolicliniki/moipolicliniki.github.io/master/models/OBJ8.gltf"></a-asset-item>
           <a-asset-item id="fix" src="https://raw.githubusercontent.com/moipolicliniki/moipolicliniki.github.io/master/models/fixmodel5.gltf"></a-asset-item>
	</a-assets>
      <a-marker type='barcode' value='1'>
        <a-entity light="type: point; color: white; intensity: 7; castShadow: true; distance: 4; decay: 1;" position="-1.8 2.5 0" ></a-entity>  
        <a-entity id="my"  side="double" rotation="0 0 0"  position="-1.8 0 -1" scale="0.0004 0.0004 0.0004" gltf-model="#poliklinnika"></a-entity>
        <a-entity id="fixed"  side="double" rotation="0 0 0"  position="-0.9 0 -0.2" scale="4.7 4.7 4.7" gltf-model="#fix"></a-entity>
      </a-marker>
      
     <a-camera-static/>
  </a-scene>
<script>
function start() {
  document.getElementById('container').style.display = 'none';
}
var model=document.getElementById('my').addEventListener('model-loaded', function() { setTimeout(start, 7000); });
document.getElementsByClassName('gotit')[0].addEventListener( "click" , function() {document.getElementsByClassName('AR-tip')[0].style.display = 'none'});
	
</script>

</body>
